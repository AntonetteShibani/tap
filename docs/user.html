<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>User docs · TAP</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content='tap'/>
<link href="https://fonts.googleapis.com/css?family=Roboto:100normal,100italic,300normal,300italic,400normal,400italic,500normal,500italic,700normal,700italic,900normal,900italicc" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="js/page.js"></script>
<script type="text/javascript" src="js/groups.js"></script>
<link rel="stylesheet" type="text/css" href="lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="lib/foundation/dist/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="css/page.css"/>

<!--
<link rel="shortcut icon" href="images/favicon.ico" />
-->
</head>

<body>
<div class="off-canvas-wrapper">
<div class="off-canvas-wrapper-inner" data-off-canvas-wrapper>

<div class="off-canvas position-left" id="off-canvas-menu" data-off-canvas>
<nav class="off-canvas-nav">
<div class="nav-home">
<a href="index.html" >
<span class="home-icon">⌂</span>TAP
</a>
<div class="version-number">
3.0.5
</div>
</div>
<div class="nav-toc">
<ul>
  <li><a href="user.html" class="active page">User docs</a></li>
  <li><a href="developer.html" class="page">Developer docs</a></li>
</ul>
</div>

</nav>
</div>

<div class="off-canvas-content" data-off-canvas-content>

<header class="site-header expanded row">
<div class="small-12 column">
<a href="#" class="off-canvas-toggle hide-for-medium" data-toggle="off-canvas-menu"><svg class="svg-icon svg-icon-menu" version="1.1" id="Menu" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"> <path class="svg-icon-menu-path" fill="#53CDEC" d="M16.4,9H3.6C3.048,9,3,9.447,3,10c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,9.447,16.952,9,16.4,9z M16.4,13
H3.6C3.048,13,3,13.447,3,14c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,13.447,16.952,13,16.4,13z M3.6,7H16.4
C16.952,7,17,6.553,17,6c0-0.553-0.048-1-0.6-1H3.6C3.048,5,3,5.447,3,6C3,6.553,3.048,7,3.6,7z"/></svg>
</a>
<div class="title"><a href="index.html">TAP</a></div>

<!--
<a href="https://www.example.com" class="logo show-for-medium">logo</a>
-->
</div>
</header>

<div class="expanded row">

<div class="medium-3 large-2 show-for-medium column">
<nav class="site-nav">
<div class="nav-home">
<a href="index.html" >
<span class="home-icon">⌂</span>TAP
</a>
<div class="version-number">
3.0.5
</div>
</div>
<div class="nav-toc">
<ul>
  <li><a href="user.html" class="active page">User docs</a></li>
  <li><a href="developer.html" class="page">Developer docs</a></li>
</ul>
</div>

</nav>
</div>

<div class="small-12 medium-9 large-10 column">
<section class="site-content">

<div class="page-header row">
<div class="medium-12 show-for-medium column">
<div class="nav-breadcrumbs">
<ul>
  <li><a href="index.html">TAP</a></li>
  <li>User docs</li>
</ul>
</div>
</div>
</div>

<div class="page-content row">
<div class="small-12 large-9 column" id="docs">
<h3><a href="#user-docs" name="user-docs" class="anchor"><span class="anchor-link"></span></a>User docs</h3>
<h4><a href="#products-and-tools-that-are-required-to-build-and-run-tap" name="products-and-tools-that-are-required-to-build-and-run-tap" class="anchor"><span class="anchor-link"></span></a>Products and Tools that are required to build and run TAP</h4>
<p>The following products are required to build and run TAP, and to potentially help you contribute to the TAP project. They are basically the tools required to run an SBT play application. Other dependencies are also specified in build.sbt and will be automatically downloaded during the first build.</p>
<p>Many of the tools/products will be downloaded during the build as build.sbt dependencies or indirectly by other products. Perhaps you want to <strong>start with cloning and building TAP, then refer to the list in this section in response to errors to see what you might be missing</strong>.</p>
<ol>
  <li>
    <p>Git</p>
    <p>You will need the Git source control command line tools and/or a Git gui interface if you want to clone and contribute to the project, otherwise you can just download a zip of the source code.</p>
    <p>The git tools are available either through your software installation tool such as Synaptic or from the <a href="https://git-scm.com">Git website</a>.</p>
  </li>
  <li>
    <p>sbt</p>
    <p>sbt will build the project and download much of the needed software for us, but if it is not on our system already, we need to download it first. Even if sbt is already installed, we may need to use a different level of sbt to do the build.</p>
    <p>Once you downloaded the code, position in the ~/tap directory, and issue the following command :</p>
    <pre><code>sbt about
</code></pre>
    <p>in the ~/tap directory. You should get the following output :</p>
    <pre><code>[info] This is sbt 0.13.16
[info] The current project is {file:~/tap/}tap 3.0.4or
[info] The current project is built against Scala 2.12.3
</code></pre>
    <p>If the sbt version is different from than 0.13.16, wait until the first compile is done, and issue the check again as the sbt build should download the correct version for you. If not, download the the 0.13.16 version that is used in the project from the <a href="http://www.scala-sbt.org/">sbt website</a></p>
  </li>
  <li>
    <p>Scala</p>
    <p>The Scala compiler version used to compile the code is 2.12.3. This should match the run-time Scala version as Scala run-time is not backward compatible. This should be taken care of by the build.sbt file on the first compile.</p>
    <p>You can issue the following command to check your Scala version:</p>
    <pre><code>scala -version
</code></pre>
    <p>This is the expected output:</p>
    <pre><code>Scala code runner version 2.12.3 -- Copyright 2002-2017, LAMP/EPFL and Lightbend, Inc.:
</code></pre>
  </li>
  <li>
    <p>Java SE Development Kit (JDK) and Java run-time (JRE)</p>
    <p>Check that you have an up to date version of the JRE. It should be at least 1.8 (The build is tested using 1.8), otherwise you have to update the Java run time on your machine.</p>
    <p>Issue:</p>
    <pre><code>java -version
</code></pre>
    <p>The JDK is also needed to compile java files in the project, and should also be at the 1.8 level. Issue :</p>
    <pre><code>javac -version
</code></pre>
    <p>If the JDK or JRE are missing or at an older level, the 1.8 level can be downloaded from <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">Oracle</a>.</p>
    <p>Installing the JDK should take care of installing the JRE also.</p>
    <p>You should provide enough memory for the JDK and JRE to build and run this project. The following values are suggested :</p>
    <p>-Xmx2048M -Xss1M</p>
  </li>
  <li>
    <p>The Play Framework</p>
    <p>This can be downloaded from the <a href="https://playframework.com">Play Framework website</a>.</p>
    <p>Press on the Download 2.6.6 button and follow the appropriate instructions for your operating system.</p>
  </li>
</ol>
<h4><a href="#getting-a-local-copy-of-tap" name="getting-a-local-copy-of-tap" class="anchor"><span class="anchor-link"></span></a>Getting a local copy of TAP</h4>
<ol>
  <li>Clone the github repository to your local repository copy on your PC, or download the zip file if you just want to build the project, and have no intention to submit a contribution.</li>
</ol>
<p>To clone the project, position to the directory where you want the local repository placed (Your home directory is fine) and issue the following command. This will create a copy of the repository in the tap directory.</p>
<pre><code>    git clone https://github.com/uts-cic/tap.git
</code></pre>
<ol>
  <li>The following jar files should also be placed in the lib directory:  (Note that the models jar is relatively large at around 750M so it might take  some time to download depending on your internet speed).
    <pre><code>[tap-models-jar](https://s3-ap-southeast-2.amazonaws.com/dev-tap-cic-uts/cc.factorie.app.nlp.all-models-1.0.0.jar)
[tap-factorie-jar](https://s3-ap-southeast-2.amazonaws.com/dev-tap-cic-uts/nlpfactorie_2.12-0.1.jar)
</code></pre>
    <p>Copy the files to the lib directory:</p>
    <pre><code>cd ~/tap
mkdir -p lib
cd lib
wget https://s3-ap-southeast-2.amazonaws.com/dev-tap-cic-uts/cc.factorie.app.nlp.all-models-1.0.0.jar
wget https://s3-ap-southeast-2.amazonaws.com/dev-tap-cic-uts/nlpfactorie_2.12-0.1.jar
</code></pre>
  </li>
</ol>
<h4><a href="#running-of-the-command-line" name="running-of-the-command-line" class="anchor"><span class="anchor-link"></span></a>Running of the Command Line</h4>
<h5><a href="#building-tap" name="building-tap" class="anchor"><span class="anchor-link"></span></a>Building TAP</h5>
<ol>
  <li>
    <p>Move to the directory where you placed the tap product. Assuming it is in the home directory, you should see a build.sbt file containing instruction on how the build is done, as well as this README.md file:</p>
    <pre><code>cd ~/tap
</code></pre>
  </li>
  <li>
    <p>Compile the product.</p>
    <p>The first compile will be very slow as dependencies have to be fetched and placed  in the ~/.ivy2 directory.</p>
    <pre><code> sbt compile
</code></pre>
    <p>The following compile warnings seem to be safe to ignore, but ensure the  last compile ends with [SUCCESS] :</p>
    <pre><code>com.typesafe.akka:akka-stream_2.12:2.5.6 is selected over {2.5.4, 2.5.3, 2.4.19}
com.typesafe.akka:akka-actor_2.12:2.5.6 is selected over {2.5.4, 2.4.19}
com.google.guava:guava:22.0 is selected over 19.0
...srcc/main/scala/handlers/GraphQlHandler.scala:42: match may not be exhaustive.
...
there were 8 feature warnings; re-run with -feature for details
two warnings found^[[0m
Total time: 11 s, completed Oct 7, 2017 12:39:37 PM^[[0m
</code></pre>
    <p>If you get the following compile errors, it means the jars that TAP relies are not  being accessed from the lib directory.  Ensure the missing jars are installed, as explained in the  &ldquo;Getting a local copy of TAP&rdquo; section.</p>
    <pre><code>import cc.factorie.app.nlp._
~/tap/src/main/scala/au.edu.utscic.tap/nlp/factorie/Annotator.scala:28: not found: value DocumentAnnotatorPipeline
</code></pre>
  </li>
</ol>
<h5><a href="#running-tap" name="running-tap" class="anchor"><span class="anchor-link"></span></a>Running TAP</h5>
<ol>
  <li>
    <p>Move to the directory where you placed the tap product. Assuming it is in the home directory:</p>
    <pre><code>cd ~/tap
</code></pre>
  </li>
  <li>
    <p>Ensure the JVM has enough memory to run the application.</p>
    <pre><code>export _JAVA_OPTIONS=&quot;-Xmx2048M -Xss1M&quot;
</code></pre>
  </li>
  <li>
    <p>You can either run TAP using either of the following methods:</p>
    <ul>
      <li>
        <p>Using sbt:</p>
        <p>sbt run</p>
      </li>
      <li>
        <p>Using play: play</p>
        <p>If you get an exception in the SBtParser as in the following lines :</p>
        <pre><code>java.lang.UnsupportedOperationException: Position.start on class scala.reflect.internal.util.OffsetPosition
at scala.reflect.internal.util.Position.start(Position.scala:114)
at sbt.internals.parser.SbtParser.sbt$internals$parser$SbtParser$$convertStatement$1(SbtParser.scala:148)
</code></pre>
        <p>This means Play is picking up an old SBT Parser that cannot deal with parsing the latest layout of the SBT files as explained in this exchange: <a href="https://github.com/sbt/sbt/issues/1739">play-parse-bug</a></p>
        <p>In order to avoid this error, and run the application with play, you should update play to use the 2.10.4 Parser which is the minimum level parser that fixes the error. This update will take a long time to run, but is a one off.</p>
        <pre><code>SBT_SCALA_VERSION=2.10.4 play update
</code></pre>
        <p>You then have to run play always specifying the SBT Scala version as described in the next step.</p>
      </li>
      <li>
        <p>Using play, but determining the SBT Scala version</p>
        <p>This is necessary if you want to run play and need to avoid the SbtParser exception.</p>
        <pre><code>  SBT_SCALA_VERSION=2.10.4 play run
</code></pre>
      </li>
    </ul>
    <p>After you run the TAP Server, you should see the following lines, indicating that the server is running and listening to requests :</p>
    <pre><code>Picked up _JAVA_OPTIONS: -Xms512M -Xmx2048M -Xss1M
[info] Loading global plugins from ~/.sbt/0.13/plugins
[info] Loading project definition from ~/tap/project
[info] Set current project to tap (in build file:~/tap/)
--- (Running the application, auto-reloading is enabled) ---
[info] p.c.s.AkkaHttpServer - Listening for HTTP on /0:0:0:0:0:0:0:0:9000
</code></pre>
    <p>You can now connect to the server by typing the following in your browser:</p>
    <pre><code>http://localhost:9000/
</code></pre>
    <p>The product should start and you can use it. You should see the following in your browser.</p>
    <pre><code>TAP Server with GraphQL
Use the graphiql IDE here
</code></pre>
    <p>To end the server, close your browser session then type return in your console where the server is running. The following message should appear on the console.</p>
    <pre><code>[info] p.c.s.AkkaHttpServer - Stopping server...
</code></pre>
  </li>
</ol>
<div class="source-github">
The source code for this page can be found <a href="https://github.com/uts-cic/tap/tree/master/src/main/paradox/user.md">here</a>.
</div>

<div class="nav-next">
<p><strong>Next:</strong> <a href="developer.html">Developer docs</a></p>
</div>
</div>
<div class="large-3 show-for-large column" data-sticky-container>
<nav class="sidebar sticky" data-sticky data-anchor="docs" data-sticky-on="large">
<div class="page-nav">
<div class="nav-title">On this page:</div>
<div class="nav-toc">
<ul>
  <li><a href="user.html#user-docs" class="header">User docs</a>
  <ul>
    <li><a href="user.html#products-and-tools-that-are-required-to-build-and-run-tap" class="header">Products and Tools that are required to build and run TAP</a></li>
    <li><a href="user.html#getting-a-local-copy-of-tap" class="header">Getting a local copy of TAP</a></li>
    <li><a href="user.html#running-of-the-command-line" class="header">Running of the Command Line</a></li>
  </ul></li>
</ul>
</div>
</div>
</nav>
</div>
</div>

</section>
</div>

</div>

<footer class="site-footer">

<section class="site-footer-nav">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 medium-4 large-3 text-center column">
<div class="nav-links">
<ul>
<!-- <li><a href="https://www.example.com/products/">Products</a> -->
</ul>
</div>
</div>

</div>
</div>
</div>
</section>

<section class="site-footer-base">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 text-center large-9 column">

<!--
<div class="copyright">
<span class="text">&copy; 2017</span>
<a href="https://www.example.com" class="logo">logo</a>
</div>
-->
</div>

</div>
</div>
</div>
</section>
</footer>

</div>
</div>
</div>
</body>

<script type="text/javascript" src="lib/foundation/dist/foundation.min.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="js/magellan.js"></script>

<style type="text/css">@import "lib/prettify/prettify.css";</style>
<script type="text/javascript" src="lib/prettify/prettify.js"></script>
<script type="text/javascript" src="lib/prettify/lang-scala.js"></script>
<script type="text/javascript">jQuery(function(){window.prettyPrint && prettyPrint()});</script>

</html>
